<?xml version="1.0"?>
<launch>
    <!-- 启动测试控制节点 -->
    <node pkg="control" type="test_control_node" name="test_control_node" output="screen">
        <!-- 基本参数 -->
        <param name="lookahead_distance" value="0.5" />
        <param name="max_linear_vel" value="1.0" />
        <param name="max_angular_vel" value="1.0" />
        <param name="control_frequency" value="50.0" />
        <param name="goal_tolerance" value="0.1" />
        
        <!-- 测试用例：0=直线，1=圆形，2=正弦 -->
        <param name="test_case" value="0" />
        
        <!-- PID参数 -->
        <param name="pid/linear/kp" value="1.0" />
        <param name="pid/linear/ki" value="0.01" />
        <param name="pid/linear/kd" value="0.05" />
        <param name="pid/angular/kp" value="1.5" />
        <param name="pid/angular/ki" value="0.01" />
        <param name="pid/angular/kd" value="0.1" />
        
        <!-- 重映射话题 -->
        <remap from="odom" to="/odometry/filtered" />
        <remap from="cmd_vel" to="/cmd_vel" />
    </node>
    
    <!-- 启动RViz进行可视化 -->
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find control)/launch/test_control.rviz" />
    
    <!-- 发布静态TF -->
    <node pkg="tf" type="static_transform_publisher" name="map_to_odom" 
          args="0 0 0 0 0 0 map odom 100" />
</launch>